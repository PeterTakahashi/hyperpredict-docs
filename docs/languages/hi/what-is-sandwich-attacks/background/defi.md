---
sidebar_position: 2
---

# DeFi के मूल सिद्धांत
इस खंड में DeFi की बुनियादी बातें समझाई गई हैं, विशेषकर Uniswap v2/v3 की कार्यप्रणाली पर ध्यान के साथ। अनेक DeFi प्रोटोकॉल EVM पर चलते हैं; Uniswap ने AMM मॉडल की पहल की, जिसने आगे चलकर PancakeSwap और SushiSwap जैसी फोर्क्स को प्रेरित किया।

![uniswap](./img/uniswap.png)

## AMM (Automated Market Maker)
AMM ऑर्डर‑बुक के बजाय लिक्विडिटी‑पूल के आधार पर स्वतः मूल्य निर्धारित करता है। इसका मानक उदाहरण Uniswap v2 है, जहाँ मूल्य constant‑product मॉडल से तय होता है:

$$
x \times y = k
$$

> यह सूत्र constant‑product मॉडल दर्शाता है, जहाँ पूल में दो टोकन‑रिज़र्व (x, y) का गुणनफल हमेशा स्थिर (k) रहता है। जब उपयोगकर्ता एक टोकन को दूसरे से स्वैप करता है, तो रिज़र्व बदलते हैं और कीमत स्वतः समायोजित होती है।

यहाँ x और y टोकन‑रिज़र्व हैं और k एक स्थिरांक है। यह डिज़ाइन सरल और गैस‑दक्ष है, पर बड़े स्वैप और फ्रंट‑रन‑आधारित मूल्य‑हेरफेर के प्रति संवेदनशील है।

ref: [What is an Automated Market Maker? by Uniswap](https://blog.uniswap.org/what-is-an-automated-market-maker)



## लिक्विडिटी‑पूल
AMM में ट्रेडिंग की बुनियाद लिक्विडिटी‑पूल हैं। पूल दो टोकन (जैसे WETH/USDC) को एक निर्दिष्ट अनुपात में जमा कर बनाया जाता है, जिससे पूल के माध्यम से पीयर‑टू‑पीयर स्वैप संभव होते हैं।

### लिक्विडिटी कौन देता है?
- कोई भी लिक्विडिटी‑प्रोवाइडर (LP) बन सकता है।
- किसी विशेष अनुमोदन की आवश्यकता नहीं; निर्दिष्ट अनुपात में दोनों टोकन जमा करें।
- पूल में आपका हिस्सा आपके योगदान के अनुपात में होता है।

### CEX से अंतर
- CEX (केंद्रीकृत एक्सचेंज)
  - बोली (Bid) और पूछ (Ask) की ऑर्डर‑बुक रखता है।
  - ऑर्डर आपस में मैच कराकर ट्रेड निष्पादित करता है।
- AMM (विकेंद्रीकृत एक्सचेंज)
  - उपयोगकर्ता बिना काउंटरपार्टी ढूँढे सीधे पूल के विरुद्ध ट्रेड करते हैं।
  - रिज़र्व में बदलाव से कीमत स्वतः तय होती है।
  - ऑर्डर‑बुक नहीं; “बुक पतली है इसलिए ऑर्डर नहीं भरा” जैसी स्थिति कम आती है।

### प्रोत्साहन
- LP को पूल से उत्पन्न ट्रेडिंग‑फीस में हिस्सा मिलता है।
  - Uniswap v2 में सामान्यतः 0.3% फीस लगती है।
  - उदाहरण: 10% पूल‑हिस्सेदारी वाले LP को 10% फीस‑आय मिलती है।
- इस प्रकार LP को एक्सचेंज को लिक्विडिटी देने का प्रतिफल मिलता है।

### नोट्स
- कोई भी LP बन सकता है, पर पूल‑अनुपात बदलने से impermanent loss (IL) का जोखिम आता है।
- फीस‑आय इस जोखिम की भरपाई करती है; भागीदारी जोखिम/रिटर्न का निर्णय है।


## Uniswap v2 स्वैप के उदाहरण

### 1. प्रारंभिक पूल‑स्थिति

निम्न पूल मानें:
- x = 100 WETH
- y = 300,000 USDC
- The constant product is
$$
k = x \times y = 100 \times 300{,}000 = 30{,}000{,}000
$$

तब 1 WETH की कीमत:

$$
\text{Price of 1 WETH} = \frac{y}{x} = \frac{300{,}000}{100} = 3{,}000 \, \text{USDC}
$$

----

### 2. उपयोगकर्ता स्वैप

#### केस A: 10 WETH बेचकर USDC लें

उपयोगकर्ता पूल में 10 WETH जोड़ता है और बदले में USDC निकालता है।
1. नया x रिज़र्व:
$$
x' = 100 + 10 = 110
$$

2. k स्थिर रहने पर:
$$
x' \times y' = k
110 \times y' = 30{,}000{,}000
y' = \frac{30{,}000{,}000}{110} \approx 272{,}727.27
$$

3. उपयोगकर्ता को मिलने वाला USDC:
$$
300{,}000 - 272{,}727.27 = 27{,}272.73 \, \text{USDC}
$$

4. नई कीमत:
$$
\frac{y'}{x'} = \frac{272{,}727}{110} \approx 2{,}479 \, \text{USDC/WETH}
$$

अतः ट्रेड के बाद कीमत 3,000 → ~2,479 USDC/WETH हो जाती है (स्लिपेज)।

----

#### केस B: 30,000 USDC जोड़कर WETH खरीदें

इसके विपरीत, उपयोगकर्ता 30,000 USDC जोड़कर WETH खरीदता है।
1. नया y रिज़र्व:
$$
y' = 300{,}000 + 30{,}000 = 330{,}000
$$

2. k स्थिर रहने पर:
$$
x' \times 330{,}000 = 30{,}000{,}000
x' = \frac{30{,}000{,}000}{330{,}000} \approx 90.91
$$

3. उपयोगकर्ता को मिलने वाला WETH:
$$
100 - 90.91 = 9.09 \, \text{WETH}
$$

4. नई कीमत:
$$
\frac{330{,}000}{90.91} \approx 3{,}628 \, \text{USDC/WETH}
$$

इस प्रकार ट्रेड के बाद कीमत 3,000 → ~3,628 USDC/WETH हो जाती है।

----

### 3. निष्कर्ष
- बड़े ऑर्डर कीमत को अधिक हिलाते हैं—स्लिपेज बढ़ता है।
- यह x × y = k लागू रहने का उप‑प्रभाव है।
- बड़े ट्रेडर स्लिपेज घटाने के लिए ऑर्डर बाँटते हैं।


## v2 की कमियों पर Uniswap v3 के सुधार

Uniswap v2 (मई 2020) ने सरल constant‑product मॉडल से DeFi में क्रांति लाई, पर सभी मूल्य‑रेंज में समान रूप से लिक्विडिटी रखना अक्षम है और बड़े ट्रेड पर स्लिपेज बढ़ाता है।

Uniswap v3 (मई 2021) ने concentrated liquidity पेश की। LP चुनी हुई मूल्य‑रेंज में लिक्विडिटी केंद्रित कर सकते हैं, जिससे जहाँ ट्रेड वास्तव में होते हैं वहाँ अधिक लिक्विडिटी बैठती है और स्लिपेज घटता है।


### उदाहरण (WETH/USDC)

- v2
  - 200 WETH और 600,000 USDC समान रूप से फैले हैं।
  - 1 WETH ≈ 3,000 USDC पर किसी विशेष रेंज में लिक्विडिटी पतली रहती है।
  - 10 WETH बेचने पर कीमत 3,000 → ~2,739 USDC/WETH (बड़ा स्लिपेज) गिरती है।

- v3
  - LP, मान लें 2,500–3,500 USDC/WETH रेंज में लिक्विडिटी केंद्रित करते हैं।
  - उस बैंड में प्रभावी लिक्विडिटी v2 की तुलना में कई गुना गहरी होती है।
  - वही 10 WETH बेचने पर कीमत 3,000 → ~2,950 USDC/WETH (कम स्लिपेज) ही खिसकती है।

---

### निष्कर्ष
- v3 में LP मूल्य‑रेंज चुन सकते हैं—पूँजी‑दक्षता बढ़ती है।
- जहाँ ट्रेड होते हैं वहाँ संपत्ति केंद्रित करने से समान लिक्विडिटी पर कम स्लिपेज होता है।
- यदि कीमत चुनी रेंज से बाहर निकल जाए, तो LP की पोज़िशन एक‑पक्षीय टोकन में बदलकर शून्य लिक्विडिटी दे सकती है।

## ऑर्डर‑बुक मॉडल (CEX और Hyperliquid)

### आधारभूत बातें

ऑर्डर‑बुक एक्सचेंज में, ट्रेडर कीमत/आकार के ऑर्डर जमा करते हैं जिन्हें मैच कराकर ट्रेड निष्पादित होते हैं।
- Bid: इस कीमत पर/इससे नीचे खरीदने को तैयार
- Ask: इस कीमत पर/इससे ऊपर बेचने को तैयार

एक्सचेंज ऑर्डर को कीमत के अनुसार क्रमबद्ध करता है; ट्रेड वहीं होते हैं जहाँ सर्वश्रेष्ठ बिड और सर्वश्रेष्ठ आस्क मिलते हैं।

उदाहरण: WETH/USDC ऑर्डर‑बुक
```
Asks
3,010 USDC - 50 WETH
3,005 USDC - 30 WETH
3,000 USDC - 20 WETH   ← Best ask

Bids
2,995 USDC - 25 WETH   ← Best bid
2,990 USDC - 40 WETH
2,985 USDC - 60 WETH
```

---
वर्तमान मार्केट (स्प्रेड) 3,000–2,995 USDC है।
- 10 WETH का मार्केट‑सेल ~3,000 USDC/WETH पर मैच होता है।
- 100 WETH का मार्केट‑सेल बुक में नीचे चलता है (3,000 → 2,990 → 2,985), औसत ~2,990 USDC/WETH।

👉 गहरी लिक्विडिटी होने पर बड़े ऑर्डर में भी स्लिपेज सीमित रहता है।


### AMM से अंतर
- AMM (जैसे Uniswap v2)
  - कीमत constant‑product कर्व से तय होती है।
  - ट्रेड कर्व के साथ फिसलते हैं (स्लिपेज अंतर्निहित)।
  - सरल; कोई भी लिक्विडिटी दे सकता है।
- ऑर्डर‑बुक (जैसे CEX, Hyperliquid)
  - कीमत बुक से तय होती है।
  - बुक गहरी हो तो बड़े ऑर्डर भी स्थिरता से निष्पादित होते हैं।
  - पतली बुक में उग्र मूव (फ्लैश‑क्रैश जोखिम) हो सकते हैं।

### फायदे और नुकसान

फायदे
- कम स्लिपेज (जब लिक्विडिटी गहरी हो)
- लिमिट‑ऑर्डर से कीमत पर नियंत्रण
- उच्च‑थ्रूपुट सिस्टम (CEX या कुछ L2 DEX) के अनुकूल

नुकसान
- केंद्रीकरण की प्रवृत्ति (CEX बुक नियंत्रित करता है)
- विकेंद्रीकृत कार्यान्वयन के लिए उच्च इन्फ्रा आवश्यकताएँ (ऑफ‑चेन इंजन/L2)
- कभी‑कभी AMM से कम पारदर्शी (स्पूफिंग, मैनिपुलेशन)


### Hyperliquid की मुख्य बातें
- अपनी उच्च‑प्रदर्शन चेन पर चलता है (EVM‑संगत नहीं)
- ऑन‑चेन रहते हुए भी CEX‑जैसी गति का लक्ष्य
- तेज़ी और गहरी बुक के कारण, सैंडविच जैसे MEV‑जोखिम AMM से कम

[Hyperliquid Foundation](https://hyperfoundation.org)
