---
sidebar_position: 5
---

# Uniswap: v2 → v3 (या v4)

Uniswap एक प्रमुख AMM प्रोटोकॉल है और DeFi की नींवों में से एक। फिर भी, AMM सैंडविच अटैक के प्रति संवेदनशील हैं। Uniswap v3 और v4 कुछ फीचर्स जोड़ते हैं जो जोखिम को आंशिक रूप से कम कर सकते हैं।

## v2: सरल constant‑product मॉडल
### विशेषताएँ
- Constant‑product AMM: `x * y = k`  
- सभी LP एक‑से पूल‑शर्तों के साथ भाग लेते हैं  
- कीमत, स्वैप से रिज़र्व में बदलाव के अनुसार चलती है  

### कमज़ोरियाँ
- पब्लिक मेमपूल में Tx दिखने से हमलावर आसानी से “फ्रंट‑रन → पीड़ित → बैक‑रन” पैटर्न चला सकते हैं।  
- स्लिपेज सीमा होने पर भी प्रेरित मूल्य‑हिलाव बदतर निष्पादन करा सकता है।  

---

## v3: Concentrated liquidity और कस्टम रेंज
### सुधार
- Concentrated liquidity: LP मूल्य‑रेंज चुन सकते हैं, पूँजी‑दक्षता बढ़ती है।  
- कई पूल: अलग‑अलग फ़ीस‑टियर और रेंज साथ‑साथ मौजूद।  

### सैंडविच के संदर्भ में
- केंद्रित लिक्विडिटी में, हल्की कीमत‑हिल भी संकरी बैंड में बड़ा स्लिपेज कर सकती है।  
- हमलावर पीड़ित‑फ्लो देखकर अब भी पहले पहुँच सकते हैं।  
- v2 की तुलना में जटिलता बढ़ती है, पर सैंडविच स्वतः हल नहीं होते।  

---

## v4: Hooks और कस्टमाइज़ेशन
### Hooks
- v4 में “hooks” जोड़े गए हैं — स्वैप के आस‑पास एक्स्टेंसिबिलिटी पॉइंट।  
- स्वैप से पहले/बाद कस्टम लॉजिक डाला जा सकता है।  
- उदाहरण:
  - ऑन‑चेन ऑर्डर‑बुक जैसा व्यवहार
  - डायनेमिक फ़ीस‑सेटिंग
  - अतिरिक्त ट्रांज़ैक्शन‑वैलिडेशन  

### सैंडविच घटाने हेतु hooks का उपयोग
- Hooks शर्तों/क्रम की जाँच कर हमलावर‑सतह घटा सकते हैं।  
- जैसे, निर्दिष्ट स्लिपेज से ऊपर ऑर्डर अस्वीकार करना, या प्राइवेट ऑर्डर‑फ्लो के साथ संयोजन।  
- Hooks वैकल्पिक हैं; v4 डिफ़ॉल्ट रूप से सैंडविच नहीं रोकता।  

---

## माइग्रेशन की चुनौतियाँ
- बहुत से उपयोगकर्ता/प्रोटोकॉल अभी भी v2 पूल पर निर्भर हैं।  
- कारण:
  - v3+ में लिक्विडिटी‑प्रबंधन अधिक जटिल/महँगा है।  
  - डाउनस्ट्रीम प्रोटोकॉल/एग्रीगेटर v2 पर निर्भर, जिससे ईकोसिस्टम‑माइग्रेशन धीमा।  
  - v4 अभी प्रारम्भिक चरण में है, अपनाव में समय लगेगा।  
- परिणामतः, काफी पूंजी v2 पूल में फँसी है जो हमलों के प्रति अधिक संवेदनशील हैं।  

---

## सारांश
- v2: सबसे सरल और सैंडविच के प्रति सबसे ज़्यादा संवेदनशील।  
- v3: पूँजी‑दक्षता बेहतर, पर अटैक‑सतह बनी रहती है।  
- v4: hooks से अधिक प्रतिरोधी DEX डिज़ाइन संभव, पर डिफ़ॉल्ट नहीं।  

Uniswap का विकास सैंडविच को पूरी तरह नहीं रोकता; यह डिज़ाइनर/उपयोगकर्ता को सुरक्षा‑उपाय जोड़ने की लचीलापन देता है।
